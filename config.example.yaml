# Yandex Tracker API Configuration
tracker:
  # Organization ID (required)
  # Get it from: https://tracker.yandex.ru/admin/orgs
  org_id: "${TRACKER_ORG_ID}"

  # API endpoint (default)
  api_endpoint: "https://api.tracker.yandex.net"

  # Board ID for fetching tasks
  board_id: 123

  # Query for finding issues
  # Explanation:
  #   - Boards: 123 - issues from board 123
  #   - Assignee: me() - assigned to current user
  #   - Status: "inProgress" - currently in progress
  #   - OR Resolved: today() - OR resolved today (worked on today)
  #   - Type: story, task, bug - exclude parent tasks (feature, epic)
  issues_query: "Boards: 123 AND Assignee: me() AND (Status: \"inProgress\" OR Resolved: today()) AND Type: story, task, bug"

# Production Calendar Configuration
calendar:
  # Calendar type: "isdayoff" (default, free) or "production-calendar" (legacy, requires paid token)
  type: "isdayoff"

  # Fallback URL for offline calendar data (xmlcalendar.ru)
  # {year} will be replaced with actual year (e.g., 2025)
  fallback_url: "https://xmlcalendar.ru/data/ru/{year}/calendar.json"

  # Cache TTL for calendar data
  cache_ttl: "24h"

# Time Distribution Rules
time_rules:
  # Target working hours per day (usually 8)
  target_hours_per_day: 8

  # Daily tasks (fixed time every working day)
  daily_tasks:
    - issue: "PROJ-101"
      minutes: 30
      description: "Daily standup"

    - issue: "PROJ-102"
      minutes: 10
      description: "Team sync 1"

    - issue: "PROJ-103"
      minutes: 10
      description: "Team sync 2"

    - issue: "PROJ-104"
      minutes: 10
      description: "Team sync 3"

  # Weekly tasks (random 2 days per week)
  weekly_tasks:
    - issue: "PROJ-201"
      hours_per_week: 8
      days_per_week: 2
      description: "Weekly infrastructure tasks"

    - issue: "PROJ-202"
      hours_per_week: 2
      days_per_week: 2
      description: "Weekly administrative tasks"

  # Randomization percentage (¬±1%)
  randomization_percent: 1.0

# Daemon Mode Configuration
daemon:
  # ‚öôÔ∏è NEW: Daily sync time (HH:MM format, MSK timezone UTC+3)
  # Runs time sync once per day at the specified time
  # Default: 20:00 (8 PM Moscow time)
  daily_time: "20:00"

  # ü™ü Windows only: Show system tray icon
  # Enables right-click menu with "Sync Now", "Status", "Quit"
  system_tray: true

  # ‚ö†Ô∏è DEPRECATED: Use daily_time instead
  # Legacy interval-based mode (checks every N hours)
  # Only used if daily_time is not set
  # check_interval: "2h"

  # Log file path
  log_file: "./logs/time-tracker-bot.log"

  # Log level: debug, info, warn, error
  log_level: "info"

# IAM Token Configuration
iam:
  # How often to CHECK if token needs refresh
  # Token will only be refreshed if it expires in less than 1 hour
  # IAM tokens live up to 12 hours
  # Recommended: check every 1-6 hours (default: 6h)
  refresh_interval: "6h"

  # CLI command to get IAM token
  cli_command: "yc iam create-token"

# State Storage
state:
  # File to store weekly schedule state
  weekly_schedule_file: "./state/weekly_schedule.json"
