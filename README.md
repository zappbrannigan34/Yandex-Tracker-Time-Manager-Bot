# Yandex Tracker Time Manager

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤ Yandex Tracker —Å —É—á—ë—Ç–æ–º –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –†–§.

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ –¥–æ 8 —á–∞—Å–æ–≤ –≤ —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–º –∫–∞–ª–µ–Ω–¥–∞—Ä—ë–º –†–§ (isdayoff.ru)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∏ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º
- ‚úÖ **–°–ª—É—á–∞–π–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∑–∞–¥–∞—á–∏ —Å –¥–æ—Å–∫–∏** (board_tasks)
- ‚úÖ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Å—Ç–∞–≤—à–µ–≥–æ—Å—è –≤—Ä–µ–º–µ–Ω–∏ –ø–æ –æ—Ç–∫—Ä—ã—Ç—ã–º –∑–∞–¥–∞—á–∞–º
- ‚úÖ –†–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ ¬±1% –¥–ª—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ 3 —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã: daemon, cron/Task Scheduler, CLI
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á—ë—Ç—ã:** —Å–ø–∏—Å–∫–∏ worklogs –ø–æ –¥–Ω—è–º/–Ω–µ–¥–µ–ª—è–º/–º–µ—Å—è—Ü–∞–º
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ IAM —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- ‚úÖ State management –¥–ª—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Windows/Linux/macOS/Docker
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ SSO/Cloud Organizations
- ‚úÖ **Month-to-date tracking:** —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –º–µ—Å—è—Ü —Å –¥–µ—Ñ–∏—Ü–∏—Ç–æ–º —á–∞—Å–æ–≤
- ‚úÖ **Backfill:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –¥–Ω–µ–π

---

## üöÄ Quick Start

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Go 1.21+** (–¥–ª—è —Å–±–æ—Ä–∫–∏)
- **yc CLI** (Yandex Cloud CLI –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è IAM —Ç–æ–∫–µ–Ω–æ–≤)
- **CGO_ENABLED=1** (–¥–ª—è Windows system tray, —Ç—Ä–µ–±—É–µ—Ç GCC/MinGW)

### Linux/macOS:

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å yc CLI
curl -sSL https://storage.yandexcloud.net/yandexcloud-yc/install.sh | bash

# 2. –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –≤ Yandex Cloud
yc init
# –î–ª—è SSO: yc init --federation-id=YOUR_FEDERATION_ID

# 3. –°–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/username/time-tracker-bot
cd time-tracker-bot

# 4. –°–æ–±—Ä–∞—Ç—å
go build -o time-tracker-bot ./cmd/time-tracker-bot

# 5. –°–æ–∑–¥–∞—Ç—å config.yaml –∏–∑ –ø—Ä–∏–º–µ—Ä–∞
cp config.yaml.example config.yaml

# 6. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å config.yaml
# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
# - tracker.org_id: –ø–æ–ª—É—á–∏—Ç—å –∏–∑ https://tracker.yandex.ru/admin/orgs
# - tracker.board_id: ID –≤–∞—à–µ–π –¥–æ—Å–∫–∏ –≤ Tracker
# - time_rules.daily_tasks: –≤–∞—à–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏
# - time_rules.weekly_tasks: –≤–∞—à–∏ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏

nano config.yaml

# 7. –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (dry-run, –Ω–∏—á–µ–≥–æ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç)
./time-tracker-bot sync --dry-run

# 8. –†–µ–∞–ª—å–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
./time-tracker-bot sync

# 9. –ó–∞–ø—É—Å—Ç–∏—Ç—å daemon (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ –≤ 20:00 MSK –µ–∂–µ–¥–Ω–µ–≤–Ω–æ)
./time-tracker-bot daemon
```

### Windows:

```powershell
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å yc CLI
iex (New-Object System.Net.WebClient).DownloadString('https://storage.yandexcloud.net/yandexcloud-yc/install.ps1')

# 2. –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –≤ Yandex Cloud
yc init
# –î–ª—è SSO: yc init --federation-id=YOUR_FEDERATION_ID

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å MinGW-w64 (–¥–ª—è CGO, —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è system tray)
# –°–∫–∞—á–∞—Ç—å: https://github.com/niXman/mingw-builds-binaries/releases
# –ò–ª–∏ —á–µ—Ä–µ–∑ chocolatey: choco install mingw

# 4. –°–æ–±—Ä–∞—Ç—å (—Å CGO –¥–ª—è system tray)
$env:CGO_ENABLED = "1"
go build -ldflags "-H windowsgui" -o time-tracker-bot.exe ./cmd/time-tracker-bot

# 5. –°–æ–∑–¥–∞—Ç—å config.yaml –∏–∑ –ø—Ä–∏–º–µ—Ä–∞
Copy-Item config.yaml.example config.yaml

# 6. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å config.yaml
# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
# - tracker.org_id: –ø–æ–ª—É—á–∏—Ç—å –∏–∑ https://tracker.yandex.ru/admin/orgs
# - tracker.board_id: ID –≤–∞—à–µ–π –¥–æ—Å–∫–∏
# - iam.cli_command: –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ yc.exe (–Ω–∞–ø—Ä–∏–º–µ—Ä: "C:/Users/USERNAME/yandex-cloud/bin/yc.exe iam create-token")
# - time_rules.daily_tasks: –≤–∞—à–∏ –∑–∞–¥–∞—á–∏
# - time_rules.weekly_tasks: –≤–∞—à–∏ –∑–∞–¥–∞—á–∏

notepad config.yaml

# 7. –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫
.\time-tracker-bot.exe sync --dry-run

# 8. –°–ø–∏—Å–∞—Ç—å –≤—Ä–µ–º—è
.\time-tracker-bot.exe sync

# 9. –ó–∞–ø—É—Å—Ç–∏—Ç—å daemon (–≤ —Ñ–æ–Ω–µ, –∏–∫–æ–Ω–∫–∞ –≤ —Ç—Ä–µ–µ)
.\time-tracker-bot.exe daemon
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ –¥–ª—è SSO/Cloud Organizations

–î–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Å SSO –∏ Cloud Organizations:

- ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è IAM —Ç–æ–∫–µ–Ω—ã** (–Ω–µ OAuth)
- ‚úÖ **API –∑–∞–≥–æ–ª–æ–≤–æ–∫:** `X-Cloud-Org-Id` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
- ‚úÖ **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** `Authorization: Bearer <token>` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
- ‚ö†Ô∏è **–ù–ï –ü–£–¢–ê–ô–¢–ï:** `federation-id` (–¥–ª—è `yc init`) ‚â† `org_id` (–¥–ª—è `config.yaml`)

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π org_id:**
1. –û—Ç–∫—Ä—ã—Ç—å https://tracker.yandex.ru/admin/orgs
2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å Organization ID
3. –£–∫–∞–∑–∞—Ç—å –≤ `config.yaml` ‚Üí `tracker.org_id`

---

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### CLI –∫–æ–º–∞–Ω–¥—ã

```bash
# Dry-run (–ø–æ–∫–∞–∑–∞—Ç—å –±–µ–∑ –∑–∞–ø–∏—Å–∏)
./time-tracker-bot sync --dry-run

# –°–ø–∏—Å–∞—Ç—å –≤—Ä–µ–º—è –∑–∞ —Å–µ–≥–æ–¥–Ω—è
./time-tracker-bot sync --date today

# –°–ø–∏—Å–∞—Ç—å –≤—Ä–µ–º—è –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É
./time-tracker-bot sync --date 2025-01-15

# –ü–æ–∫–∞–∑–∞—Ç—å —É–∂–µ —Å–ø–∏—Å–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è (–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ)
./time-tracker-bot status

# –ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ –∑–∞–¥–∞—á–∞–º
./time-tracker-bot report --date 2025-11-01      # –æ–¥–∏–Ω –¥–µ–Ω—å
./time-tracker-bot report --week                  # —Ç–µ–∫—É—â–∞—è –Ω–µ–¥–µ–ª—è (–ø–Ω-–≤—Å)
./time-tracker-bot report --month                 # —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü (1-–µ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —á–∏—Å–ª–∞)
./time-tracker-bot report --from 2025-11-01 --to 2025-11-07  # –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω

# –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á
./time-tracker-bot weekly-schedule

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –º–µ—Å—è—Ü —Å –¥–µ—Ñ–∏—Ü–∏—Ç–æ–º —á–∞—Å–æ–≤
./time-tracker-bot status --month                     # —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü (month-to-date)
./time-tracker-bot status --from 2025-11-01 --to 2025-11-11  # –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥

# –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –¥–Ω–∏
./time-tracker-bot backfill                           # –∑–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –¥–Ω–∏ –º–µ—Å—è—Ü–∞
./time-tracker-bot backfill --from 2025-11-01 --to 2025-11-08  # –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥
./time-tracker-bot backfill --dry-run                 # –ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω–æ (–±–µ–∑ –∑–∞–ø–∏—Å–∏)
```

### üìä Month-to-Date Tracking & Backfill

**Status --month** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞ –ø–µ—Ä–∏–æ–¥:

```bash
$ ./time-tracker-bot status --month

Month Status (2025-11-01 to 2025-11-11):
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  Period:           2025-11-01 to 2025-11-11 (11 calendar days)
  Working days:     6 days
  Target hours:     47.0h (2820 minutes)
  Worked hours:     40.0h (2397 minutes)
  Deficit:          7.0h (423 minutes) ‚ö†Ô∏è
  Progress:         85.0%

  Days breakdown:
    ‚úÖ 2025-11-01 (Sat): 8h  0m / 7h  0m (114%)
    ‚úÖ 2025-11-05 (Wed): 8h  0m / 8h  0m (100%)
    ‚ùå 2025-11-10 (Mon): 0h  0m / 8h  0m (0%)
    ‚è≥ 2025-11-11 (Tue): 7h 57m / 8h  0m (99%)

  Missing days: 1
  üí° Tip: Use 'time-tracker-bot backfill' to fill missing days
```

**Backfill** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –¥–Ω–∏:

```bash
$ ./time-tracker-bot backfill --dry-run

üìã Backfill Summary (2025-11-01 to 2025-11-10):
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  Processed days:    1
  Total entries:     5
  Total time:        8.0h (480 minutes)

  Days processed:
    ‚úÖ 2025-11-10: 5 entries, 8.0h
      ‚Ä¢ PROJ-101      0h 29m  Daily standup
      ‚Ä¢ PROJ-102      0h 10m  Team sync 1
      ‚Ä¢ PROJ-201      7h  0m  Development work

[DRY RUN] No worklogs were created
```

**–ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞ –∑–∞–¥–∞—á:**
- **Source 1:** Worklogs (–∑–∞–¥–∞—á–∏ —Å —É–∂–µ –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º)
- **Source 2:** Current Board (—Ç–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏ –Ω–∞ –¥–æ—Å–∫–µ)
- **Source 3:** Updated Filter (–≤—Å–µ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Å –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–∏–æ–¥–∞)
- **Changelog Analysis:** –î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ —Å—Ç—Ä–æ–∏—Ç—Å—è timeline —Å—Ç–∞—Ç—É—Å–æ–≤
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω–æ–≥–æ –¥–Ω—è –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤—Å–µ –∑–∞–¥–∞—á–∏ –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ "in progress" –Ω–∞ —ç—Ç—É –¥–∞—Ç—É

**Safety features:**
- Default: backfill month-to-date (–∏—Å–∫–ª—é—á–∞—è —Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å)
- Dry-run preview –ø–µ—Ä–µ–¥ —Ä–µ–∞–ª—å–Ω—ã–º —Å–æ–∑–¥–∞–Ω–∏–µ–º worklogs
- Exact 8h normalization –ø–æ—Å–ª–µ —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏–∏

### ü§ñ Daemon Mode (Recommended)

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è:**

**–ó–∞–ø—É—Å–∫ daemon:**

```bash
# Windows
.\time-tracker-bot.exe daemon

# Linux/macOS
./time-tracker-bot daemon
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ config.yaml:**
```yaml
daemon:
  daily_time: "20:00"     # –í—Ä–µ–º—è —Å–ø–∏—Å–∞–Ω–∏—è (HH:MM, MSK UTC+3)
  system_tray: true       # –ò–∫–æ–Ω–∫–∞ –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–º —Ç—Ä–µ–µ (Windows)
  log_file: "./logs/time-tracker-bot.log"
  log_level: "info"
```

**Daemon –±—É–¥–µ—Ç:**
- ‚úÖ –°–ø–∏—Å—ã–≤–∞—Ç—å –≤—Ä–µ–º—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 20:00 MSK (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- ‚úÖ –ï—Å–ª–∏ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –ü–û–°–õ–ï 20:00 ‚Üí —Å–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è —Å—Ä–∞–∑—É
- ‚úÖ –†–∞–±–æ—Ç–∞—Ç—å –≤ —Ñ–æ–Ω–µ –ë–ï–ó –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ (Windows)
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–∫–æ–Ω–∫—É –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–º —Ç—Ä–µ–µ (Windows)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ `./logs/time-tracker-bot.log`

**System Tray Menu (Windows):**
- üîÑ **Sync Now** - –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –≤—Ä—É—á–Ω—É—é
- üìä **Status** - –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å (worked/target minutes)
- üö™ **Quit** - –∑–∞–≤–µ—Ä—à–∏—Ç—å daemon

**Windows: –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã**

**–ß–µ—Ä–µ–∑ Task Scheduler (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**

1. –û—Ç–∫—Ä—ã—Ç—å Task Scheduler (`taskschd.msc`)
2. Create Task:
   - **General:** Name: "Time Tracker Bot", Run whether user is logged on or not
   - **Triggers:** At startup
   - **Actions:** Start program: `C:\path\to\time-tracker-bot.exe`, Arguments: `daemon`
   - **Settings:** Allow task to run on demand, Stop task if runs longer than 3 days

**Linux/macOS: systemd service**

```bash
sudo systemctl enable time-tracker-bot
sudo systemctl start time-tracker-bot
sudo systemctl status time-tracker-bot
```

### Cron Mode (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ crontab:
0 */2 9-18 * * 1-5 /usr/local/bin/time-tracker-bot sync
```

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: Duration Format

Yandex Tracker –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **BUSINESS time units**:
- **P1D** = 1 —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å = **8 —á–∞—Å–æ–≤** (–Ω–µ 24!)
- **P1W** = 1 —Ä–∞–±–æ—á–∞—è –Ω–µ–¥–µ–ª—è = **40 —á–∞—Å–æ–≤** (5 –¥–Ω–µ–π –ø–æ 8 —á–∞—Å–æ–≤, –Ω–µ 168!)
- **P1W2D** = 1 –Ω–µ–¥–µ–ª—è + 2 –¥–Ω—è = 56 —á–∞—Å–æ–≤
- **PT8H** = 8 –æ–±—ã—á–Ω—ã—Ö —á–∞—Å–æ–≤

–ü–∞—Ä—Å–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã, –≤–∫–ª—é—á–∞—è –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ (P1WT20M, P2DT3H30M).

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   CLI / Daemon / Cron Modes             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Time Manager Core                      ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Daily Tasks (fixed time)          ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Weekly Tasks (scheduled days)     ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Board Tasks (random selection)    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ Remaining Time ‚Üí Open Issues      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Calendar Module                        ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ isdayoff.ru API (primary)         ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ Fallback: xmlcalendar.ru          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Tracker API Client                     ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Search Issues                     ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Get All Board Issues              ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Get Current User (SSO support)    ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Get Worklogs (user filtering)     ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ Create Worklog                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  IAM Token Manager                      ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ Auto-refresh every hour           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `config.yaml`:

```yaml
tracker:
  org_id: "${TRACKER_ORG_ID}"  # ‚ö†Ô∏è Tracker org_id (–ù–ï federation-id!)
  board_id: 123
  issues_query: "Boards: 123 AND Assignee: me() AND (Status: \"inProgress\" OR Resolved: today()) AND Type: story, task, bug"

time_rules:
  target_hours_per_day: 8

  daily_tasks:
    - issue: "PROJ-101"
      minutes: 30
      description: "Daily standup"

  weekly_tasks:
    - issue: "PROJ-201"
      hours_per_week: 8
      days_per_week: 2

  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–ª—É—á–∞–π–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∑–∞–¥–∞—á–∏ —Å –¥–æ—Å–∫–∏
  board_tasks:
    enabled: false                      # –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å
    base_minutes_per_day: 30            # –±–∞–∑–æ–≤–æ–µ –≤—Ä–µ–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 30 –º–∏–Ω—É—Ç)
    randomization_percent: 40.0         # —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ ¬±40% (18-42 –º–∏–Ω)
    tasks_percent: 20.0                 # –ø—Ä–æ—Ü–µ–Ω—Ç –∑–∞–¥–∞—á –æ—Ç –¥–æ—Å–∫–∏ (20%)
    tasks_randomization_percent: 40.0   # —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ ¬±40%

iam:
  refresh_interval: "1h"
  cli_command: "yc iam create-token"  # –∏–ª–∏ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –Ω–∞ Windows
```

**–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä:** `config.yaml.example`

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# Unit tests (26/26 passed ‚úÖ)
go test ./... -v

# Dry-run test
./time-tracker-bot sync --dry-run --date today

# Check status
./time-tracker-bot status

# Weekly schedule
./time-tracker-bot weekly-schedule
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã (2025-11-11):**
- ‚úÖ API authentication (SSO/Cloud Organizations)
- ‚úÖ status: 1h worked, 8h target
- ‚úÖ dry-run sync: 6 entries, 7h 2m distributed
- ‚úÖ weekly-schedule: Week 46, 2025

---

## üõ†Ô∏è Troubleshooting

### –û—à–∏–±–∫–∞ "yc: command not found"

```bash
# Linux/macOS:
curl -sSL https://storage.yandexcloud.net/yandexcloud-yc/install.sh | bash

# Windows:
iex (New-Object System.Net.WebClient).DownloadString('https://storage.yandexcloud.net/yandexcloud-yc/install.ps1')
```

### –û—à–∏–±–∫–∞ "Authentication required"

```bash
yc init
# –î–ª—è SSO:
yc init --federation-id=<your-federation-id>
```

### –û—à–∏–±–∫–∞ 403/401 –æ—Ç Tracker API

–ö—Ä–∞—Ç–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
1. `yc config list` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
2. `yc iam create-token` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
3. `yc organization-manager organization list` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

### –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å yc CLI
yc version && yc config list

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
yc iam create-token

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ Tracker API
TOKEN=$(yc iam create-token)
ORG_ID=$(grep org_id config.yaml | cut -d'"' -f2)
curl -H "Authorization: Bearer $TOKEN" \
     -H "X-Cloud-Org-Id: $ORG_ID" \
     https://api.tracker.yandex.net/v2/myself

# 4. Dry-run —Ç–µ—Å—Ç
./time-tracker-bot sync --dry-run
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[config.yaml.example](./config.yaml.example)** - –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚ùå **–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å** `config.yaml` —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ IAM —Ç–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏ (–∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–π —á–∞—Å)
- ‚úÖ –õ–æ–≥–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–æ–∫–µ–Ω—ã –∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- ‚úÖ `config.yaml` –∏ `state/*.json` –≤ .gitignore

---

## üìä –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

**–í–µ—Ä—Å–∏—è:** 1.0
**–î–∞—Ç–∞:** 2025-11-11
**–°—Ç–∞—Ç—É—Å:** ‚úÖ PRODUCTION READY

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞:**
- ‚úÖ Windows 10/11 (Task Scheduler)
- ‚úÖ Linux (systemd, cron)
- ‚úÖ macOS (cron)
- ‚úÖ Docker

**–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤:**
- ‚úÖ Cloud Organizations (SSO/—Ñ–µ–¥–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ)
- ‚úÖ 360 Organizations (–æ–±—ã—á–Ω—ã–µ)

---

## License

MIT
